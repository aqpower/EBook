import{d as S,k as u,s as j,f as h,g as e,t as f,w as l,v as n,m as b,n as E,p as x,x as N,h as T,i as $,F as B,r as R,j as g,I as A,_ as D}from"./index-09020506.js";import{s as _,e as F}from"./user-1668f9ec.js";const U={class:"text-base-content mt-1 text-center text-2xl font-bold leading-9 tracking-tight"},z={class:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm"},M={class:"space-y-6"},q=e("label",{for:"email",class:"text-base-content block text-sm font-medium leading-6"},"Email",-1),G={key:0,class:"loading loading-bars loading-xs h-6"},H={class:"mt-5 sm:mx-auto sm:w-full sm:max-w-xl"},J={class:"w-full"},K={class:"space-y-6 sm:mx-auto sm:w-full sm:max-w-sm mt-6"},L={class:"flex justify-center items-center"},O={class:"loading loading-bars loading-xs h-6"},P=e("span",null,"验证",-1),Q=[P],Z=S({__name:"RegisterCard",setup(W){const o=u(""),v=u(""),C=u("注册账号"),r=u(!1),c=j(D),a=u(!1),m=u(!1),t=u(60),w=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),y=()=>{a.value=!0,w(o.value)?V():c({title:"💢",content:"邮箱格式错误",btnContent:"👌我现在就改正",onClose:()=>{a.value=!1}})},p=()=>{const s=setInterval(()=>{t.value>0?t.value--:clearInterval(s)},1e3);return s},k=()=>{m.value=!0,_(o.value).then(()=>{c({title:"🎉",content:"验证码已经发送到你的邮箱，请注意查收",btnContent:"👌",onClose:()=>{m.value=!1}}),t.value=60,p()}).catch(()=>{m.value=!1})},V=()=>{_(o.value).then(s=>{s.code==200?(c({title:"🎉",content:"验证码已经发送到你的邮箱，请注意查收",btnContent:"👌",onClose:()=>{a.value=!1,r.value=!0}}),t.value=60,p()):c({title:"😢",content:s.msg,btnContent:"👌",onClose:()=>{a.value=!1,r.value=!0}})}).catch(()=>{a.value=!1})},I=()=>{F(v.value).then(s=>{s.code==200?c({content:"验证码验证通过！",btnContent:"👌",onClose:()=>{R.push(`/account/init-profile/${o.value}`)}}):c({content:s.msg,btnContent:"👌",onClose:()=>{}})})};return(s,i)=>(g(),h(B,null,[e("h2",U,f(C.value),1),l(e("div",z,[e("div",M,[e("div",null,[q,l(e("input",{id:"email","onUpdate:modelValue":i[0]||(i[0]=d=>o.value=d),placeholder:"请输入您的邮箱号",class:"mt-2 input input-bordered input-primary w-full sm:text-sm sm:leading-5 h-10"},null,512),[[b,o.value]])]),e("div",null,[e("button",{onClick:y,class:"min-h-0 h-9 btn btn-primary flex w-full justify-center rounded-md hover:bg-rose-300 px-3 py-1.5 leading-6 text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-rose-600"},[a.value?(g(),h("span",G)):E("",!0),l(e("span",null,"点击发送验证码",512),[[n,!a.value]])])])])],512),[[n,!r.value]]),l(e("div",H,[e("p",J,[x(" ^_^ 验证码已经成功发送至 "),e("strong",null,f(o.value),1),x("请在下方输入收到的验证码~ ")])],512),[[n,r.value]]),l(e("div",K,[e("div",L,[l(e("input",{id:"email","onUpdate:modelValue":i[1]||(i[1]=d=>v.value=d),placeholder:"请输入验证码",class:"input input-bordered input-primary w-full sm:text-sm sm:leading-5 h-10"},null,512),[[b,v.value]]),e("div",{class:N(["w-10/12 ml-3 h-9 badge flex",{" text-white hover:cursor-pointer hover:bg-rose-300 active:scale-90 badge-primary":t.value==0,"badge-outline":t.value!=0}]),onClick:i[2]||(i[2]=d=>t.value==0?k():1)},[l(T($(A),{class:"h-10 w-5 mr-1",icon:"svg-spinners:clock",color:"#fb7185"},null,512),[[n,t.value!=0]]),l(e("span",O,null,512),[[n,m.value]]),l(e("p",null,f(t.value)+" 秒后可重新发送",513),[[n,t.value!=0]]),l(e("p",null,"点击重新发送",512),[[n,t.value==0&&!m.value]])],2)]),e("button",{onClick:I,class:"h-9 min-h-0 btn btn-primary flex w-full justify-center rounded-md hover:bg-rose-300 px-3 py-1.5 leading-6 text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-rose-600"},Q)],512),[[n,r.value]])],64))}});export{Z as default};
