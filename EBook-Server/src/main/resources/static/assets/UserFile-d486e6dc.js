import{d as N,s as Q,l as K,a as V,k as o,b as M,j as u,f as _,w as d,v as h,g as e,F as R,A as z,h as w,i as F,z as B,t as U,_ as S,y as le,u as ae,c as ie,K as ce,D as q,n as H,x as A,p as O,J as E,m as ue}from"./index-09020506.js";import{e as re,f as de,h as ve,i as fe}from"./posts-93b230f2.js";import{P as me}from"./PostCard-31c30a91.js";import{a as W}from"./icon-da093cbc.js";import{g as pe,a as Y,b as he,f as _e,h as be,n as xe,i as ge,j as we}from"./user-1668f9ec.js";import{_ as Ce}from"./AvatarSelector.vue_vue_type_script_setup_true_lang-fc84b7a6.js";import{f as ke}from"./time-b70c9257.js";import"./_plugin-vue_export-helper-c27b6911.js";const $e={class:"flex gap-3 flex-col w-full overflow-scroll max-h-96"},Ie=e("p",null,"关注列表",-1),ye={class:"divider"},Ue={class:"flex gap-3 items-center justify-between hover:cursor-pointer"},Fe=["onClick"],Ae=["onClick"],Pe=N({__name:"FollowList",setup(D){var r;const b=Q(S),x=K(),c=(r=V().user)==null?void 0:r.id,i=o([]);M(()=>{v()});const v=()=>{pe(c).then(s=>{console.log(s),s.code==200&&(i.value=s.data)})},C=s=>{x.push(`/home/profile/${s}`).then(()=>{window.location.reload()})},l=s=>{Y({careUserId:c,caredUserId:s}).then(a=>{a.code==200&&b({title:"🥳",content:"取消关注成功！",btnContent:"👌",onClose:()=>{v()}})})};return(s,f)=>(u(),_("div",$e,[Ie,d(e("div",ye,"你还没有关注过用户哦~🙏",512),[[h,i.value.length==0]]),(u(!0),_(R,null,z(i.value,(a,$)=>(u(),_("div",{key:$},[e("div",Ue,[e("div",{class:"flex gap-2 items-center",onClick:I=>C(a.id)},[w(F(B.Icon),{class:"w-9 h-9",icon:F(W)[a.avatar]},null,8,["icon"]),e("p",null,U(a.name),1)],8,Fe),e("div",null,[e("button",{class:"btn btn-warning btn-outline min-h-0 h-9",onClick:I=>l(a.id)}," 取消关注 ",8,Ae)])])]))),128))]))}}),Se={class:"flex gap-3 flex-col w-full overflow-scroll max-h-96"},Le=e("p",null,"粉丝列表",-1),je={class:"flex gap-3 items-center justify-between hover:cursor-pointer"},Be=["onClick"],Ne=["onClick"],Ve=N({__name:"FansList",setup(D){var C;const b=K(),g=(C=V().user)==null?void 0:C.id,c=o([]);M(()=>{i()});const i=()=>{he(g).then(l=>{console.log(l),l.code==200&&(c.value=l.data)})},v=l=>{b.push(`/home/profile/${l}`).then(()=>{window.location.reload()})};return(l,r)=>(u(),_("div",Se,[Le,(u(!0),_(R,null,z(c.value,(s,f)=>(u(),_("div",{key:f},[e("div",je,[e("div",{class:"flex gap-2 items-center",onClick:a=>v(s.id)},[w(F(B.Icon),{class:"w-9 h-9",icon:F(W)[s.avatar]},null,8,["icon"]),e("p",null,U(s.name),1)],8,Be),e("div",null,[e("button",{class:"btn btn-success btn-outline min-h-0 h-9",onClick:a=>v(s.id)}," 看看 ",8,Ne)])])]))),128))]))}}),Me={class:"sm:columns-1 md:columns-1 lg:columns-2 xl:columns-3"},Re={class:"card w-full bg-base-100 shadow-xl"},ze={class:"card-body p-5"},De={class:"text-xl",style:{"font-family":"LXGWWenKai,sans-serif"}},Te={class:"text-right"},Ee={class:"card-actions justify-end mt-1"},Ke=["onClick"],We=N({__name:"CommentList",setup(D){var r;const b=o(1),x=o(30),c=(r=V().user)==null?void 0:r.id,i=o([]),v=K();M(()=>{C()});const C=()=>{re(c,b.value,x.value).then(s=>{s.code==200&&(i.value=s.data.comments)})},l=s=>{let f=v.currentRoute.value.fullPath;f+=`/posts/${s}`,v.push(f)};return(s,f)=>(u(),_("div",Me,[(u(!0),_(R,null,z(i.value,(a,$)=>(u(),_("div",{key:$,class:"ml-2 mr-7 my-6 break-inside-avoid"},[e("div",Re,[e("div",ze,[e("p",De,U(a.content),1),e("p",Te,U(F(ke)(a.commentTime)),1),e("div",Ee,[e("button",{class:"btn btn-neutral btn-outline min-h-0 h-9",onClick:I=>l(a.postId)}," 看看 ",8,Ke)])])])]))),128))]))}}),Ge={class:"flex justify-center mt-6 items-center"},Je={key:1,class:"ml-3 flex flex-col gap-3"},Xe={class:"badge badge-primary"},qe={class:"flex items-center gap-1"},He={class:"text-xl font-bold"},Oe={class:"flex ml-2 gap-2"},Qe={class:"font-extrabold mr-1"},Ye={class:"font-extrabold mr-1"},Ze={class:"flex gap-3 ml-4"},et={class:"mt-3 flex justify-center items-center gap-6"},tt={class:"my-5"},st={class:"pr-6"},nt={class:"flex justify-center mt-10 text-xl text-gray-400"},ot={class:"sm:columns-3 md:columns-3 lg:columns-4 xl:columns-5"},lt={class:"flex flex-col gap-7 items-center font-bold"},at=e("p",null,"修改个人信息",-1),it={class:"flex flex-col items-center font-bold"},ct={class:"flex flex-col items-center font-bold"},_t=N({__name:"UserFile",setup(D){var J,X;const b=V(),x=o("帖子"),g=Q(S),c=o((J=b.user)==null?void 0:J.name),i=o(-1),v=o(!1),C=o(!1),l=o(!1),r=o(!1),s=o(!1),f=o(1),a=o(35),$=o(!1);le("avatarIndex",i);const I=o([]),T=ae(),k=o(),P=(X=b.user)==null?void 0:X.id,y=T.params.userId;M(()=>{_e(P,y).then(n=>{console.log(n),n.code==200&&(k.value=n.data,l.value=k.value.followed,r.value=k.value.blacked,i.value=k.value.avatar)}),G()});const L=n=>{x.value=n,n=="评论"?$.value=!0:($.value=!1,f.value=1,G())},G=()=>{let n=x.value;n=="帖子"?de(y,f.value,a.value).then(t=>{t.code==200&&(I.value=t.data.posts)}):n=="点赞"?ve(y,f.value,a.value).then(t=>{t.code==200&&(I.value=t.data.posts)}):n=="收藏"&&fe(y,f.value,a.value).then(t=>{t.code==200&&(I.value=t.data.posts)})},m=ie(()=>{var n;return T.params.userId!=null&&T.params.userId==((n=b.user)==null?void 0:n.id)}),Z=()=>{be({careUserId:P,caredUserId:y}).then(t=>{t.code==200?(g({title:"🥳",content:"关注成功！",btnContent:"👌"}),l.value=!0):g({title:"😢",content:t.msg,btnContent:"👌"})})},ee=()=>{xe({userId:P,blackUserId:y}).then(t=>{t.code==200&&(g({title:"🥳",content:"拉黑成功！",btnContent:"👌"}),r.value=!0)})},te=()=>{ge({userId:P,blackUserId:y}).then(t=>{t.code==200&&(g({title:"🥳",content:"取消拉黑成功！",btnContent:"👌"}),r.value=!1)})},se=()=>{Y({careUserId:P,caredUserId:y}).then(t=>{t.code==200&&(g({title:"🥳",content:"取消关注成功！",btnContent:"👌"}),l.value=!1)})},ne=()=>{var t;if(c.value.length==0){g({title:"😢",content:"用户名不可以为空",btnContent:"👌👌👌"});return}let n={id:(t=b.user)==null?void 0:t.id,avatar:i.value,name:c.value};we(n).then(j=>{console.log(j),j.code==200&&(b.updateInfo(i.value,c.value),k.value.name=c.value,g({title:"😊",content:"用户信息更改成功",btnContent:"👌👌👌",onClose:()=>{v.value=!1}}))})};return(n,t)=>{const j=ce("RouterView");return u(),_("div",null,[e("div",Ge,[i.value!=-1?(u(),q(F(B.Icon),{key:0,class:"w-28 h-28 m-1",icon:F(W)[i.value]},null,8,["icon"])):H("",!0),k.value?(u(),_("div",Je,[e("div",Xe,"ID: "+U(k.value.id),1),e("div",qe,[e("p",He,U(k.value.name),1),d(e("div",{class:"cursor-pointer",onClick:t[0]||(t[0]=p=>v.value=!0)},[w(F(B.Icon),{icon:"solar:pen-2-bold"})],512),[[h,m.value==!0]])]),e("div",Oe,[e("p",{onClick:t[1]||(t[1]=p=>m.value==!0&&(C.value=!0)),class:A({"hover:cursor-pointer":m.value==!0})},[e("span",Qe,U(k.value.followNum),1),O("关注 ")],2),e("p",{onClick:t[2]||(t[2]=p=>m.value==!0&&(s.value=!0)),class:A({"hover:cursor-pointer":m.value==!0})},[e("span",Ye,U(k.value.fansNum),1),O("粉丝 ")],2)])])):H("",!0),e("div",Ze,[d(e("button",{class:"btn btn-info btn-outline min-h-0 h-8",onClick:Z}," 关注 ",512),[[h,m.value==!1&&l.value==!1&&r.value==!1]]),d(e("button",{class:"btn btn-success btn-outline min-h-0 h-8",onClick:se}," ✅已关注 ",512),[[h,m.value==!1&&l.value==!0]]),d(e("button",{class:"btn btn-error btn-outline min-h-0 h-8",onClick:ee}," 拉黑 ",512),[[h,m.value==!1&&r.value==!1&&l.value==!1]]),d(e("button",{class:"btn btn-error btn-outline min-h-0 h-8",onClick:te}," ⭕已拉黑 ",512),[[h,m.value==!1&&r.value==!0]])])]),e("div",et,[e("button",{class:A(["btn btn-neutral btn-outline w-44 text-left min-h-0 h-9",{" btn-active":x.value=="帖子"}]),onClick:t[3]||(t[3]=p=>L("帖子")),name:"options"}," 发布的帖子 ",2),d(e("button",{class:A(["btn btn-neutral btn-outline w-44 text-left min-h-0 h-9",{" btn-active":x.value=="点赞"}]),onClick:t[4]||(t[4]=p=>L("点赞")),name:"options"}," 点赞 ",2),[[h,m.value==!0]]),d(e("button",{class:A(["btn btn-neutral btn-outline w-44 text-left min-h-0 h-9",{" btn-active":x.value=="收藏"}]),onClick:t[5]||(t[5]=p=>L("收藏")),name:"options"}," 收藏 ",2),[[h,m.value==!0]]),d(e("button",{class:A(["btn btn-neutral btn-outline w-44 text-left min-h-0 h-9",{" btn-active":x.value=="评论"}]),value:"帖子",name:"options",onClick:t[6]||(t[6]=p=>L("评论"))}," 评论 ",2),[[h,m.value==!0]])]),e("div",tt,[d(w(We,null,null,512),[[h,$.value==!0]]),d(e("div",st,[d(e("div",nt," 该用户没有发送过帖子 ",512),[[h,I.value.length==0]]),e("div",ot,[(u(!0),_(R,null,z(I.value,(p,oe)=>(u(),q(me,{key:oe,post:p},null,8,["post"]))),128))])],512),[[h,$.value==!1]])]),w(S,{visible:v.value},{content:E(()=>[e("div",lt,[at,w(Ce),d(e("input",{class:"input input-primary h-12 w-full","onUpdate:modelValue":t[7]||(t[7]=p=>c.value=p)},null,512),[[ue,c.value]]),e("button",{class:"btn btn-primary min-h-0 h-9 w-full",onClick:ne},"确定")])]),_:1},8,["visible"]),w(S,{visible:C.value},{content:E(()=>[e("div",it,[w(Pe),e("button",{class:"mt-4 btn min-h-0 h-9 w-full",onClick:t[8]||(t[8]=p=>C.value=!1)}," 确定 ")])]),_:1},8,["visible"]),w(S,{visible:s.value},{content:E(()=>[e("div",ct,[w(Ve),e("button",{class:"mt-4 btn min-h-0 h-9 w-full",onClick:t[9]||(t[9]=p=>s.value=!1)},"确定")])]),_:1},8,["visible"]),w(j)])}}});export{_t as default};
