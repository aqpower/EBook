import{d as U,s as E,l as M,u as G,k as u,c as Y,b as q,j as h,f as g,g as e,w as c,m as S,h as d,i as x,z as C,_ as P,a as F,v as R,F as z,A as T,B as L,t as J,C as I,x as v,I as A,D as H,E as K,G as X,H as $,J as B,p as Z,q as O,n as Q,K as W}from"./index-09020506.js";import{c as ee}from"./var-e8af8410.js";import{u as te,n as se}from"./posts-93b230f2.js";import{_ as le}from"./_plugin-vue_export-helper-c27b6911.js";import{a as ne}from"./icon-da093cbc.js";import{_ as oe}from"./logo-text-nobg-bd024fc2.js";import{d as ae}from"./user-1668f9ec.js";const re={class:"h-16 w-full m-1"},ie={class:"flex justify-around items-center h-full"},ue={class:"join p-28"},ce=e("p",{class:"text-2xl text-primary",style:{"font-family":"'Zhi Mang Xing', cursive"}}," 分享无止尽！ ",-1),de=U({__name:"EasyHead",setup(j){const b=E(P),o=M(),r=G(),t=u(""),l=Y(()=>o.currentRoute.value.fullPath.includes("search"));q(()=>{l.value==!0&&(t.value=r.params.keyword)});const i=()=>{if(t.value.length==0||t.value.length>25){b({title:"😭",content:"搜索的信息可不能为空",btnContent:"👌"});return}o.push(`/home/search/${t.value}`).then(()=>{window.location.reload()})};return(_,f)=>(h(),g("div",re,[e("div",ie,[e("div",ue,[c(e("input",{"onUpdate:modelValue":f[0]||(f[0]=m=>t.value=m),class:"h-9 w-96 border-0 rounded-2xl bg-base-200 input join-item text-base-content",placeholder:"搜索小破书"},null,512),[[S,t.value]]),e("button",{class:"h-9 btn bg-base-200 join-item rounded-r-full min-h-0 text-base-content",onClick:i},[d(x(C.Icon),{class:"w-5 h-5",icon:"iconamoon:search"})])]),ce])]))}}),me="/assets/logo-icon-nobg-7ac9ad7c.png",pe={for:"imgInput",class:"outline-dashed rounded-md outline-1 outline-offset-1 hover:outline-primary outline-neutral-content bg-base-200 w-full h-full flex py-36 flex-col justify-center items-center"},ve=e("p",null,"拖拽图片到此或点击上传",-1),be=e("p",{class:"text-sm text-neutral"},"(最多支持9张)",-1),he={class:"flex mt-1"},fe={class:"carousel rounded-box"},_e=["src"],xe={class:"space-y-3 mt-5 flex flex-col justify-center"},ge=e("label",null,"请选择颜色分区",-1),we={class:"flex"},ye=["onMouseover","onClick"],ke={class:"badge"},$e=U({__name:"NewImgPost",setup(j,{expose:b}){const o=u([]);let r=u([]);const t=u(!0),l=E(P),i=u(-1),_=u(-1),f=u(""),m=u(""),y=k=>{t.value==!0&&(t.value=!1);const a=k.target.files;console.log(a),a&&(r.value=a,n(a))},s=F(),n=k=>{for(let a=0;a<k.length;a++){const p=new FileReader;p.onload=()=>{o.value.length==9?l({content:"最多只允许添加9张照片,超出部分未上传!",btnContent:"👌"}):o.value.push(p.result)},p.readAsDataURL(k[a])}console.log(o.value)};return b({newImgPost:()=>{if(!(f.value.length<45&&f.value.length>0)){l({title:"😮",content:"标题长度必须大于0并且小于45。",btnContent:"👌"});return}if(!(m.value.length<2e3&&m.value.length>0)){l({title:"😮",content:"文章内容必须大于0并且小于2000。",btnContent:"👌"});return}const k=new FormData;console.log("files: ",r.value);for(let a=0;a<r.value.length;a++)k.append("image",r.value[a]);I.emit("startUpload",!0),te(k).then(a=>{var w,V;console.log(a),(w=s.user)==null||w.id;const p={type:0,title:f.value,contentText:m.value,color:_.value,lyrics:null,ip:"",userId:parseInt((V=s.user)==null?void 0:V.id),urls:a.data};se(p).then(N=>{console.log(N),N.code==401&&l({title:"😮‍💨",msg:"对不起捏，你被禁言了",btnContent:"👌"}),I.emit("postFinish",!0)}).catch(()=>{I.emit("postFinish",!1)})}).catch(a=>{I.emit("postFinish",!1)})}}),(k,a)=>(h(),g("div",null,[c(e("label",pe,[d(x(C.Icon),{class:"w-20 h-20 text-primary",icon:"line-md:cloud-up"}),ve,be],512),[[R,t.value]]),e("input",{id:"imgInput",type:"file",class:"hidden",accept:"image/*",onChange:y,multiple:""},null,32),c(e("div",he,[e("div",fe,[(h(!0),g(z,null,T(o.value,(p,w)=>(h(),g("div",{key:w,class:"carousel-item"},[e("img",{src:p,alt:"Uploaded Image",class:"w-48 h-32 object-cover mr-2 rounded-md AqImage"},null,8,_e)]))),128))])],512),[[R,!t.value]]),c(e("div",xe,[c(e("input",{"onUpdate:modelValue":a[0]||(a[0]=p=>f.value=p),type:"text",placeholder:"填写标题，会有更多赞哦",class:"input input-bordered w-full"},null,512),[[S,f.value]]),c(e("textarea",{"onUpdate:modelValue":a[1]||(a[1]=p=>m.value=p),class:"textarea textarea-bordered h-36 resize-none",placeholder:"填写更全面的描述信息"},`
      `,512),[[S,m.value]]),ge,e("div",we,[(h(!0),g(z,null,T(x(ee),(p,w)=>(h(),g("div",{key:w,class:"btn flex mr-3 p-1 items-center gap-1",style:L(i.value===w||w==_.value?{backgroundColor:p.var}:{}),onMouseover:V=>i.value=w,onClick:V=>_.value=w,onMouseleave:a[2]||(a[2]=V=>i.value=-1)},[e("div",{style:L({backgroundColor:p.var}),class:"h-2 w-2 p-2 rounded-lg"},null,4),e("div",ke,[e("p",null,J(p.name),1)])],44,ye))),128))])],512),[[R,!t.value]])]))}}),Ce={};function je(j,b){return h(),g("div")}const Ie=le(Ce,[["render",je]]),Ue={class:"w-full h-full"},Ve={class:"flex overflow-x-auto overflow-y-hidden border-b border-gray-200 dark:border-gray-700"},Pe=e("span",{class:"mx-1 text-sm sm:text-base"}," 上传图文 ",-1),Re=e("span",{class:"mx-1 text-sm sm:text-base"}," 上传歌词 ",-1),Se={class:"m-3 h-full"},Be=U({__name:"NewPost",setup(j,{expose:b}){const o=u(!0),r=u();return b({newPost:()=>{r.value.newImgPost()}}),(l,i)=>(h(),g("div",Ue,[e("div",Ve,[e("button",{class:v(["inline-flex font-note font-medium h-12 px-2 py-2 -mb-px text-center bg-transparent sm:px-4 -px-1 dark:border-blue-400 dark:text-blue-300 whitespace-nowrap focus:outline-none",{"text-primary border-b-4 border-primary":o.value,"text-gray-400":!o.value}]),onClick:i[0]||(i[0]=_=>o.value=!0)},[d(x(A),{class:"w-6 h-6 mr-1",icon:"line-md:image"}),Pe],2),e("button",{class:v(["ml-5 inline-flex font-note h-12 px-2 py-2 -mb-px text-center sm:px-4 -px-1 cursor-base focus:outline-none",{"text-primary border-b-4 border-primary":o.value==!1,"text-gray-400":o.value}]),onClick:i[1]||(i[1]=_=>o.value=!1)},[d(x(A),{icon:"line-md:mastodon",class:"w-6 h-6 mr-1"}),Re],2)]),e("div",Se,[o.value?(h(),H($e,{key:0,ref_key:"imagePostRef",ref:r},null,512)):(h(),H(Ie,{key:1}))])]))}}),Ee={class:"rounded-xl ease-linear duration-300"},Me={class:"card card-compact w-56 bg-200",style:{"box-shadow":`0 4px 32px 0 rgba(0, 0, 0, 0.08),
          0 1px 4px 0 rgba(0, 0, 0, 0.04)`}},Fe={class:"card-body"},De={class:"dropdown"},Ne=e("div",{tabindex:"0",role:"button",class:"btn btn-info btn-outline min-h-0 h-9 w-full"},[Z(" 更换主题 "),e("svg",{width:"12px",height:"12px",class:"h-2 w-2 fill-current opacity-60 inline-block",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048"},[e("path",{d:"M1799 349l242 241-1017 1017L7 590l242-241 775 775 775-775z"})])],-1),ze={tabindex:"0",class:"right-0 dropdown-content z-[1] p-2 shadow-2xl bg-base-200 rounded-box w-44"},Te=O('<figure><img class="w-32" src="'+oe+'"></figure><div class="flex justify-center items-center flex-col"><p class="text-success">DESIGNED BY</p><p class="text-success">@aqpower</p><p class="text-success">@zhuxinr</p><p class="text-success">@wzbmkbk</p><p class="text-success">Copyright©2023 EasyBook</p></div>',2),Le={class:"flex justify-center flex-col items-center gap-5"},Ae=e("p",{class:"font-extrabold text-error"},"👋 账号注销 👋",-1),He=e("p",{class:"text"},"账号注销后不能再被找回，请三思",-1),qe={class:"flex flex-row justify-center w-full gap-5"},Ge=U({__name:"EasyMenu",setup(j){const b=E(P),o=F(),r=M(),t=K(),l=u(t.getTheme()),i=u(!1),_=u("");X(l,()=>{t.setTheme(l.value)});const f=()=>{o.setUser({id:"",name:"",email:"",token:"",avatar:0}),r.replace("/")},m=()=>{var s;let y={id:(s=o.user)==null?void 0:s.id,password:_.value};ae(y).then(n=>{console.log(n),n.code==200?b({title:"👋",content:"账户注销成功，再见了我的朋友！EasyBook永远记得你！",btnContent:"👌",onClose:()=>{o.setUser({id:"",name:"",email:"",token:"",avatar:0}),r.replace("/")}}):n.code==401&&b({title:"👋",content:"密码输入错误",btnContent:"👌"})})};return(y,s)=>(h(),g("div",Ee,[e("div",Me,[e("div",Fe,[e("div",De,[Ne,e("ul",ze,[e("li",null,[c(e("input",{type:"radio",name:"theme-dropdown",class:"theme-controller btn btn-sm btn-block btn-ghost justify-start","aria-label":"😊 默认",value:"light","onUpdate:modelValue":s[0]||(s[0]=n=>l.value=n)},null,512),[[$,l.value]])]),e("li",null,[c(e("input",{type:"radio",name:"theme-dropdown",class:"theme-controller btn btn-sm btn-block btn-ghost justify-start","aria-label":"🧛‍♂️ 吸血鬼",value:"dracula","onUpdate:modelValue":s[1]||(s[1]=n=>l.value=n)},null,512),[[$,l.value]])]),e("li",null,[c(e("input",{type:"radio",name:"theme-dropdown",class:"theme-controller btn btn-sm btn-block btn-ghost justify-start","aria-label":"🌳 森林",value:"forest","onUpdate:modelValue":s[2]||(s[2]=n=>l.value=n)},null,512),[[$,l.value]])]),e("li",null,[c(e("input",{type:"radio",name:"theme-dropdown",class:"theme-controller btn btn-sm btn-block btn-ghost justify-start","aria-label":"💖 情人节",value:"valentine","onUpdate:modelValue":s[3]||(s[3]=n=>l.value=n)},null,512),[[$,l.value]])]),e("li",null,[c(e("input",{type:"radio",name:"theme-dropdown",class:"theme-controller btn btn-sm btn-block btn-ghost justify-start","aria-label":"💦 海洋",value:"aqua","onUpdate:modelValue":s[4]||(s[4]=n=>l.value=n)},null,512),[[$,l.value]])]),e("li",null,[c(e("input",{type:"radio",name:"theme-dropdown",class:"theme-controller btn btn-sm btn-block btn-ghost justify-start","aria-label":"🕰 复古",value:"retro","onUpdate:modelValue":s[5]||(s[5]=n=>l.value=n)},null,512),[[$,l.value]])]),e("li",null,[c(e("input",{type:"radio",name:"theme-dropdown",class:"theme-controller btn btn-sm btn-block btn-ghost justify-start","aria-label":"⚡ 赛博朋克",value:"cyberpunk","onUpdate:modelValue":s[6]||(s[6]=n=>l.value=n)},null,512),[[$,l.value]])]),e("li",null,[c(e("input",{type:"radio",name:"theme-dropdown",class:"theme-controller btn btn-sm btn-block btn-ghost justify-start","aria-label":"🧁 纸杯蛋糕",value:"cupcake","onUpdate:modelValue":s[7]||(s[7]=n=>l.value=n)},null,512),[[$,l.value]])])])]),e("button",{class:"btn btn-success btn-outline min-h-0 h-9",onClick:f},"退出登录"),e("button",{class:"btn btn-error btn-outline min-h-0 h-9",onClick:s[8]||(s[8]=n=>i.value=!0)}," 注销账号 "),Te])]),d(P,{visible:i.value},{content:B(()=>[e("div",Le,[Ae,He,c(e("input",{type:"password","onUpdate:modelValue":s[9]||(s[9]=n=>_.value=n),class:"input input-error w-full",placeholder:"请输入账号密码"},null,512),[[S,_.value]]),e("div",qe,[e("button",{class:"btn btn-success w-20",onClick:m},"确定"),e("button",{class:"btn btn-error w-20",onClick:s[10]||(s[10]=n=>i.value=!1)},"取消")])])]),_:1},8,["visible"])]))}}),Ye={class:"fixed w-56 h-full"},Je=e("div",{class:"flex justify-start py-4 px-6 items-center"},[e("img",{class:"h-12",src:me,alt:"Your Company"}),e("p",{class:"font-extrabold text-rose-400 text-lg"},"EasyBook")],-1),Ke={class:"flex p-3 flex-col space-y-3"},Xe={class:"absolute bottom-2 pl-3"},Ze=e("span",{class:"text-base font-medium font-sans"},"更多",-1),Oe=e("input",{type:"checkbox",id:"my_modal_6",class:"modal-toggle"},null,-1),Qe={class:"modal",role:"dialog",style:{margin:"0"}},We={class:"modal-box w-11/12 h-11/12 max-w-5xl p-0",style:{height:"80%"}},et={class:"modal-action justify-start flex-col w-full h-full m-0"},tt={class:"w-full h-full"},st={key:0,class:"m-5"},lt={class:"space-x-5 flex",style:{"margin-left":"2rem"}},nt=e("div",{class:"flex justify-center"},[e("p",null,"正在上传，请耐心等待~ 😊"),e("span",{class:"loading loading-spinner loading-md"})],-1),ot=e("div",{class:"flex justify-center"},[e("span",{class:"loading loading-spinner loading-md"})],-1),at=U({__name:"LeftBar",setup(j){const b=u(!1),o=u(),r=u(!1),t=u(1),l=M(),i=u(!1),_=()=>{o.value.newPost()};q(()=>{l.currentRoute.value.fullPath.includes("profile")?t.value=4:l.currentRoute.value.fullPath.includes("message")&&(t.value=3)});const f=F();I.on("startUpload",y=>{r.value=!0}),I.on("postFinish",y=>{r.value=!1});const m=y=>{var s;switch(y.srcElement.innerText){case"发现":l.push("/home/explore").then(()=>{window.location.reload()}),t.value=1;break;case"发布":b.value=!0;break;case"通知":t.value=3,l.push("/home/message");break;case"我":t.value=4,l.push(`/home/profile/${(s=f.user)==null?void 0:s.id}`).then(()=>{window.location.reload()});break;case"更多":i.value=!i.value}};return(y,s)=>{var n;return h(),g("div",Ye,[Je,e("div",null,[e("div",Ke,[e("button",{class:v(["btn btn-neutral h-10 min-h-min w-56 justify-start items-center gap-3",{"":t.value==1," bg-transparent shadow-transparent border-0":t.value!=1}]),onClick:m},[d(x(C.Icon),{class:v(["ml-1 w-5 h-5",{"":t.value==1,"text-base-content":t.value!=1}]),icon:"line-md:home-md"},null,8,["class"]),e("span",{class:v(["text-base font-medium",{"":t.value==1,"text-base-content":t.value!=1}])},"发现",2)],2),e("label",{for:"my_modal_6",class:v(["btn btn-neutral h-10 min-h-min w-56 justify-start items-center gap-3",{"":t.value==2,"border-0 shadow-transparent bg-transparent":t.value!=2}]),onClick:m},[d(x(C.Icon),{class:v(["ml-1 w-5 h-5",{"":t.value==2,"text-base-content":t.value!=2}]),icon:"line-md:clipboard-plus"},null,8,["class"]),e("span",{class:v(["text-base font-medium font-sans",{"":t.value==2,"text-base-content":t.value!=2}])},"发布",2)],2),e("button",{class:v(["btn btn-neutral h-10 min-h-min w-56 justify-start items-center gap-3",{"":t.value==3,"bg-transparent shadow-transparent border-0":t.value!=3}]),onClick:m},[d(x(C.Icon),{class:v(["ml-1 w-5 h-5",{"":t.value==3,"text-base-content":t.value!=3}]),icon:"line-md:telegram"},null,8,["class"]),e("span",{class:v(["text-base font-medium font-sans",{"":t.value==3,"text-base-content":t.value!=3}])},"通知",2)],2),e("button",{class:v(["btn btn-neutral h-10 min-h-min w-56 justify-start items-center gap-3",{"":t.value==4," bg-transparent shadow-transparent border-0":t.value!=4}]),onClick:m},[d(x(C.Icon),{class:v(["ml-1 w-5 h-5",{"":t.value==4,"text-base-content":t.value!=4}]),icon:x(ne)[(n=x(f).user)==null?void 0:n.avatar]},null,8,["icon","class"]),e("span",{class:v(["text-base font-medium font-sans",{"":t.value==4,"text-base-content":t.value!=4}])},"我",2)],2)]),e("div",Xe,[c(d(Ge,{class:"mb-3"},null,512),[[R,i.value==!0]]),e("button",{class:v(["btn h-10 min-h-min w-56 rounded-3xl justify-start items-center gap-3",{"":t.value==5," bg-transparent shadow-transparent border-0":t.value!=5}]),onClick:m},[d(x(C.Icon),{class:"ml-1 w-5 h-5",icon:"line-md:close-to-menu-alt-transition"}),Ze],2)]),Oe,e("div",Qe,[e("div",We,[e("div",et,[e("div",tt,[b.value?(h(),g("div",st,[d(Be,{ref_key:"newPostRef",ref:o},null,512)])):Q("",!0)]),e("div",lt,[e("label",{for:"my_modal_6",class:"btn btn-primary mb-3 w-36",onClick:s[0]||(s[0]=D=>_())},"提交"),e("label",{for:"my_modal_6",class:"btn mb-3 w-36",onClick:s[1]||(s[1]=D=>b.value=!1)},"放弃")])])])])]),d(P,{visible:r.value,title:"😊"},{content:B(()=>[nt]),"btn-content":B(()=>[ot]),_:1},8,["visible"])])}}}),rt={class:"flex w-full"},it={class:"ml-64 w-full flex flex-col",style:{height:"100vh"}},ht=U({__name:"HomeView",setup(j){return(b,o)=>{const r=W("RouterView");return h(),g("div",rt,[d(at),e("div",it,[d(de),d(r,{class:"flex-1 overflow-scroll"})])])}}});export{ht as default};
