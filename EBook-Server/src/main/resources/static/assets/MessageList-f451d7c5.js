import{d as x,l as k,k as r,a as b,b as y,K as C,f as c,w as I,v as S,g as o,F as z,A,h as f,j as i,x as L,i as h,z as V,t as u}from"./index-09020506.js";import{k as $,f as j}from"./user-1668f9ec.js";import{a as B}from"./icon-da093cbc.js";import{b as M}from"./posts-93b230f2.js";const P={class:"w-full"},R={class:"flex justify-center mt-10 text-xl text-gray-400"},U={class:"flex flex-col gap-y-5 justify-center items-center w-full"},D={class:"font-bold"},E={class:"font-extrabold"},F=["onClick"],J=x({__name:"MessageList",setup(N){const d=k(),g=r(1),_=r(10),t=r([]),v=b(),m=n=>{d.push(`/home/message/posts/${n}`)},w=n=>{d.push(`/home/profile/${n}`).then(()=>{window.location.reload()})};return y(()=>{var l;let n={id:v.user.id,page:g.value,pageSize:_.value};const p=(l=v.user)==null?void 0:l.id;$(n).then(e=>{if(console.log(e),e.code==200&&e.data.notifies!=null){t.value=e.data.notifies;for(let s=0;s<t.value.length;s++)j(p,t.value[s].userId).then(a=>{console.log(t.value[s]),t.value[s].avatar=a.data.avatar,t.value[s].name=a.data.name}),M(t.value[s].postId).then(a=>{console.log(a),a.code==200&&(t.value[s].title=a.data.posts.title)})}})}),(n,p)=>{const l=C("RouterView");return i(),c("div",P,[I(o("div",R," 目前还没有通知哦~ ",512),[[S,t.value.length==0]]),o("div",U,[(i(!0),c(z,null,A(t.value,(e,s)=>(i(),c("div",{key:s,class:"w-full"},[o("div",{role:"alert",class:L(["alert shadow-lg w-4/6 m-auto",{"alert-error":e.content.includes("收藏"),"alert-success":e.content.includes("点赞")}])},[f(h(V.Icon),{class:"w-7 h-7 hover:cursor-pointer hover:opacity-75 ease-in-out duration-300 active:scale-75",icon:h(B)[e.avatar],onClick:a=>w(e.userId)},null,8,["icon","onClick"]),o("div",null,[o("h3",null,u(e.name),1),o("h3",D,u(e.content),1),o("span",E,u(e.title),1)]),o("button",{class:"btn btn-neutral btn-sm",onClick:a=>m(e.postId)},"看看",8,F)],2)]))),128))]),f(l)])}}});export{J as default};
