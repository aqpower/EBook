import{d as C,s as y,k as c,l as D,f as u,g as e,w as v,m as x,n as b,a as I,j as r,_ as j}from"./index-09020506.js";import{a as U}from"./admin-6db7a148.js";const V=e("h2",{class:"text-base-content mt-1 text-center text-2xl font-bold leading-9 tracking-tight"}," 管理员登录 ",-1),$={class:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm"},A={class:"space-y-6"},B=e("div",{class:"flex items-center justify-between"},[e("label",{for:"email",class:"block text-sm font-medium leading-6 text-base-content"},"账户"),e("div",{class:"text-sm"},[e("a",{href:"#/account/login",class:"font-semibold rounded-xl text-info"},"用户登录")])],-1),E={class:"mt-2"},L=e("div",{class:"flex items-center justify-between"},[e("label",{for:"password",class:"block text-sm font-medium leading-6 text-base-content"},"密码"),e("div",{class:"text-sm"},[e("a",{href:"#/account/resetPassword",class:"font-semibold text-info"},"忘记密码?")])],-1),R={class:"mt-2"},S={key:0,class:"loading loading-bars loading-xs h-6"},M={key:1,class:"h-6"},q=C({__name:"AdminLogin",setup(N){const m=y(j),i=c(""),d=c(""),n=c(!1),g=D(),f=t=>{m({title:"😢",content:t,btnContent:"👌",onClose:()=>{n.value=!1}})},p=t=>{let s="";t==="id"?s="ID必须为5位数字":t==="password"?s="密码必须为至少6位且仅包含字母或数字":s="ID和密码验证失败",f(s)},h=()=>{n.value=!0;const t=i.value,s=d.value,o=/^\d{5}$/,_=/^[a-zA-Z0-9]{6,}$/;if(!o.test(t)){p("id");return}if(!_.test(s)){p("password");return}U({id:t,password:s}).then(a=>{if(a.code==200){let l=a.data;const w=I(),k={id:l.id,name:l.name,token:l.token,avatar:l.avatar};w.setUser(k),m({title:"😢",content:"登录成功！",btnContent:"👌",onClose:()=>{n.value=!1,g.replace("/admin/home")}})}else a.code==401&&f(a.msg)})};return(t,s)=>(r(),u("div",null,[V,e("div",$,[e("div",A,[e("div",null,[B,e("div",E,[v(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>i.value=o),placeholder:"请输入管理员ID",class:"input input-bordered input-success w-full sm:text-sm sm:leading-5 h-10"},null,512),[[x,i.value]])])]),e("div",null,[L,e("div",R,[v(e("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>d.value=o),id:"password",type:"password",placeholder:"请输入密码",class:"input input-success input-bordered w-full sm:text-sm sm:leading-5 h-10"},null,512),[[x,d.value]])])]),e("div",null,[e("button",{onClick:s[2]||(s[2]=o=>h()),class:"min-h-0 h-9 btn btn-info flex w-full justify-center rounded-md px-3 py-1.5 leading-6 shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2"},[n.value?(r(),u("span",S)):b("",!0),n.value?b("",!0):(r(),u("span",M,"登录"))])])])])]))}});export{q as default};
